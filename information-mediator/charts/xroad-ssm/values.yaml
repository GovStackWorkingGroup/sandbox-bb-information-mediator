db:
  name: "ssm-db"
  namespace: ${NAMESPACE}
  engine: postgres
  masterUsername: "postgres"
  masterUserPassword:
    namespace: ${NAMESPACE}
    name: "ssm-db-secret"
    key: password
  dbSubnetGroupName: default
  dbInstanceClass: db.t4g.micro
  allocatedStorage: 20
  deletionProtection: false
secret:
  db:
    adminPassword:
      name: ssm-db-secret
      namespace: ${NAMESPACE}
      type: Opaque
    serverConfAdminPassword:
      name: ssm-db-serverconf-admin-secret
      namespace: ${NAMESPACE}
      type: Opaque
    serverConfPassword:
      name: ssm-db-serverconf-secret
      namespace: ${NAMESPACE}
      type: Opaque
    messageLogAdminPassword:
      name: ssm-db-messagelog-admin-secret
      namespace: ${NAMESPACE}
      type: Opaque
    messageLogPassword:
      name: ssm-db-messagelog-secret
      namespace: ${NAMESPACE}
      type: Opaque
service:
  name: govstack-xroad-ssm
  namespace: ${NAMESPACE}
  type: ClusterIP
deployment:
  name: govstack-xroad-ssm
  namespace: ${NAMESPACE} 
  containers:
    name: govstack-xroad-ssm
    image: 463471358064.dkr.ecr.eu-central-1.amazonaws.com/${ECR_SS_REPO_NAME}:xroad-ssm
    imagePullPolicy: "Always"
    env:
      - name: "DB_HOST"
        value: "${SSM_DB_HOST}"
      - name: "DB_PORT"
        value: "${SSM_DB_PORT}"
      - name: "DB_ADMIN_USER"
        value: "${SSM_DB_ADMIN_USER}"
      - name: "DB_ADMIN_PASS"
        value: "${SSM_DB_ADMIN_PASS}"                   
      - name: "DB_SERVERCONF_ADMIN_PASS"
        value: "${SSM_DB_SERVERCONF_ADMIN_PASS}"
      - name: "DB_SERVERCONF_PASS"
        value: "${SSM_DB_SERVERCONF_PASS}"
      - name: "DB_NESSAGELOG_ADMIN_PASS"
        value: "${SSM_DB_NESSAGELOG_ADMIN_PASS}"
      - name: "DB_MESSAGELOG_PASS"
        value: "${SSM_DB_MESSAGELOG_PASS}"                                                               

